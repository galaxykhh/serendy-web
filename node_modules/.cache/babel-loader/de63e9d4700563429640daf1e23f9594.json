{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/hyeonghan/VSCode/React/Serendy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13;import React,{useEffect}from'react';import styled from'styled-components';import{zoomIn,zoomOut}from'../../style/keyframes';import Loader from'react-loader-spinner';import{theme}from'../../style/theme';import{useChat}from'../../Hooks/useChat';import{observer}from'mobx-react';import MessageBox from'./MessageBox';import userStore from'../../store/userStore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChatWindow=observer(function(){var chat=useChat();useEffect(function(){chat.getMatchedUser();chat.handleReceiveMsg();chat.chatStopped();// 상대방이 대화종료를 했을때\n},[]);// eslint-disable-line\nuseEffect(function(){return function(){chat.stopChat();};},[]);// eslint-disable-line\nuseEffect(function(){chat.handlePushChat();return function(){chat.setRecentChat({nickName:'',message:'',socketID:''});chat.scrollToBottom();};},[chat.recentChat.message]);// eslint-disable-line\nreturn/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(ChatBox,{animation:chat.isMatched?zoomIn:zoomOut,visibility:chat.display,children:[/*#__PURE__*/_jsx(Screen,{ref:chat.screen,children:chat.chatLog.map(function(data,index){return/*#__PURE__*/_jsx(MessageBox,{message:data.message,nickName:data.nickName,socketID:data.socketID===userStore.socketID},index);})}),/*#__PURE__*/_jsxs(SenderBox,{children:[/*#__PURE__*/_jsx(Input,{ref:chat.input,onKeyPress:chat.handleEnter}),/*#__PURE__*/_jsx(SendBtn,{ref:chat.sendBtn,onClick:chat.handleSendMsg,disabled:chat.chatFinished?true:false,children:\"\\uC804\\uC1A1\"})]})]}),/*#__PURE__*/_jsx(HandlerContainer,{children:chat.isSearching?/*#__PURE__*/_jsx(_Fragment,{children:chat.isMatched?/*#__PURE__*/_jsx(_Fragment,{children:chat.chatFinished?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BigMent,{children:\" \\uB300\\uD654\\uAC00 \\uC885\\uB8CC\\uB418\\uC5C8\\uC5B4\\uC694 \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Ment,{size:\"18px\",children:\" \\uC0C1\\uB300\\uBC29\\uC740 \\uC5B4\\uB5A4 \\uC0AC\\uB78C\\uC774\\uC5C8\\uC744\\uAE4C\\uC694? \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(BtnBox,{children:/*#__PURE__*/_jsx(StartBtn,{onClick:chat.reStart,children:\" \\uB2E4\\uC2DC\\uD558\\uAE30 \"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BigMent,{children:\" \\uC0C1\\uB300\\uC640 \\uC5F0\\uACB0\\uB418\\uC5C8\\uC5B4\\uC694 \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Ment,{size:\"18px\",children:\" \\uBA3C\\uC800 \\uC778\\uC0AC \\uD574\\uBCF4\\uC2DC\\uB294 \\uAC74 \\uC5B4\\uB5A0\\uC138\\uC694? \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(BtnBox,{children:/*#__PURE__*/_jsx(CancelBtn,{onClick:chat.stopChat,children:\" \\uB300\\uD654\\uBC29 \\uB098\\uAC00\\uAE30 \"})})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BigMent,{style:{marginBottom:'30px'},children:\" \\uC0C1\\uB300\\uB97C \\uCC3E\\uACE0 \\uC788\\uC5B4\\uC694 \"}),/*#__PURE__*/_jsx(Loader,{type:\"Circles\",color:theme.colors.plum,height:60,width:60}),/*#__PURE__*/_jsx(BtnBox,{children:/*#__PURE__*/_jsx(CancelBtn,{onClick:chat.handleSearch,children:\" \\uCDE8\\uC18C\\uD558\\uAE30 \"})})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BigMent,{children:\" \\uC0C1\\uB300\\uB97C \\uCC3E\\uACE0 \\uB300\\uD654\\uB97C \\uC2DC\\uC791\\uD558\\uC138\\uC694 ! \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Rule,{children:[/*#__PURE__*/_jsx(Ment,{size:\"18px\",children:\" \\xB7 \\uB300\\uD654\\uB294 \\uC11C\\uB85C\\uAC00 \\uC124\\uC815\\uD55C \\uC774\\uB984\\uC73C\\uB85C \\uC9C4\\uD589\\uB3FC\\uC694 \"}),/*#__PURE__*/_jsx(Ment,{size:\"18px\",children:\" \\xB7 \\uC911\\uAC04\\uC5D0 \\uB300\\uD654\\uB97C \\uB098\\uAC00\\uC9C0 \\uC54A\\uC73C\\uBA74 \\uB300\\uD654\\uB97C \\uACC4\\uC18D \\uD560 \\uC218 \\uC788\\uC5B4\\uC694 \"}),/*#__PURE__*/_jsx(Ment,{size:\"18px\",children:\" \\xB7 \\uB204\\uAD70\\uAC00 \\uB300\\uD654\\uBC29\\uC744 \\uB098\\uAC00\\uAC8C \\uB418\\uBA74 \\uB300\\uD654\\uAC00 \\uC885\\uB8CC\\uB3FC\\uC694 \"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(BtnBox,{children:/*#__PURE__*/_jsx(StartBtn,{onClick:chat.handleSearch,children:\" \\uC0C1\\uB300 \\uCC3E\\uAE30 \"})})]})})]});});export default ChatWindow;var Row=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: center;\\n    align-items: center;\\n    width: 100%;\\n    height: 100%;\\n    @media only screen and (max-width: 1450px) {\\n        flex-direction: column;\\n    }\\n\"])));var ChatBox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    margin-right: 20px;\\n    width: 100%;\\n    height: 740px;\\n    min-height: 740px;\\n    visibility: \",\";\\n    animation: \",\" .7s ease forwards;\\n    @media only screen and (max-width: 1450px) {\\n        margin-right: 0px;\\n        min-height: 340px;\\n    }\\n\"])),function(_ref){var visibility=_ref.visibility;return visibility;},function(_ref2){var animation=_ref2.animation;return animation;});var Screen=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    width: 740px;\\n    height: 680px;\\n    max-height: 680px;\\n    background-color: \",\";\\n    border-radius: 10px;\\n    overflow-y: auto;\\n    @media only screen and (max-width: 1450px) {\\n        width: 99%;\\n        height: 70%;\\n        min-width: 300px;\\n    };\\n\"])),function(_ref3){var theme=_ref3.theme;return theme.colors.white10;});var SenderBox=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    margin-top: 10px;\\n    width: 740px;\\n    min-width: 500px;\\n    height: 50px;\\n    @media only screen and (max-width: 1450px) {\\n        width: 99%;\\n        min-width: 200px;\\n    }\\n\"])));var Input=styled.input.attrs({type:'text',placeholder:'내용을 입력해주세요',autocomplete:'off'})(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    all: unset;\\n    width: 84%;\\n    min-height: 50px;\\n    padding-left: 30px;\\n    font-size: 18px;\\n    color: \",\";\\n    background-color: \",\";\\n    border-radius: 10px;\\n    @media only screen and (max-width: 400px) {\\n        width: 99%;\\n    }\\n\"])),function(_ref4){var theme=_ref4.theme;return theme.colors.white;},function(_ref5){var theme=_ref5.theme;return theme.colors.white10;});var SendBtn=styled.button(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n    all: unset;\\n    width: 10%;\\n    height: 50px;\\n    font-size: 18px;\\n    text-align: center;\\n    background-color: \",\";\\n    border-radius: 10px;\\n    color: \",\";\\n    cursor: pointer;\\n    transition: .3s ease;\\n    &:hover {\\n        background-color: \",\";\\n        color: \",\";\\n    }\\n    @media only screen and (max-width: 1450px) {\\n        font-size: 15px;\\n        width: 10%;\\n    }\\n\"])),function(_ref6){var theme=_ref6.theme;return theme.colors.main60;},function(_ref7){var theme=_ref7.theme;return theme.colors.white;},function(_ref8){var theme=_ref8.theme;return theme.colors.plum;},function(_ref9){var theme=_ref9.theme;return theme.colors.black;});var HandlerContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    width: 100%;\\n    min-width: 300px;\\n    height: 740px;\\n    border-radius: 10px;\\n    background-color: \",\";\\n    @media only screen and (max-width: 1450px) {\\n        height: 70%;\\n    }\\n\"])),function(_ref10){var theme=_ref10.theme;return theme.colors.main60;});var Rule=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: flex-start;\\n\"])));var Ment=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n    font-size: 17px;\\n    margin-bottom: 10px;\\n    white-space: nowrap;\\n    color: \",\";\\n    @media only screen and (max-width: 1520px) {\\n        font-size: 15px;\\n    }\\n\"])),function(_ref11){var theme=_ref11.theme;return theme.colors.white;});var BigMent=styled(Ment)(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n    font-size: 30px;\\n    color: \",\";\\n    @media only screen and (max-width: 1520px) {\\n        font-size: 25px;\\n    }\\n\"])),function(_ref12){var theme=_ref12.theme;return theme.colors.white;});var StartBtn=styled(SendBtn)(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n    width: 150px;\\n    height: 70px;\\n    font-size: 20px;\\n    &:hover {\\n        color: \",\";\\n    }\\n    @media only screen and (max-width: 1450px) {\\n        width: 100px;\\n        height: 40px;\\n        font-size: 17px;\\n        margin-top: 15px;\\n    }\\n\"])),function(_ref13){var theme=_ref13.theme;return theme.colors.black;});var CancelBtn=styled(StartBtn)(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n    &:hover {\\n        background-color: \",\";\\n        color: \",\";\\n    }\\n\"])),function(_ref14){var theme=_ref14.theme;return theme.colors.red;},function(_ref15){var theme=_ref15.theme;return theme.colors.white;});var BtnBox=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n    position: absolute;\\n    bottom: 70px;\\n    height: 35%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    @media only screen and (max-width: 1450px) {\\n        bottom: -60px;\\n    }\\n\"])));","map":{"version":3,"sources":["/Users/hyeonghan/VSCode/React/Serendy/client/src/components/ChatPage/ChatWindow.tsx"],"names":["React","useEffect","styled","zoomIn","zoomOut","Loader","theme","useChat","observer","MessageBox","userStore","ChatWindow","chat","getMatchedUser","handleReceiveMsg","chatStopped","stopChat","handlePushChat","setRecentChat","nickName","message","socketID","scrollToBottom","recentChat","isMatched","display","screen","chatLog","map","data","index","input","handleEnter","sendBtn","handleSendMsg","chatFinished","isSearching","reStart","marginBottom","colors","plum","handleSearch","Row","div","ChatBox","visibility","animation","Screen","white10","SenderBox","Input","attrs","type","placeholder","autocomplete","white","SendBtn","button","main60","black","HandlerContainer","Rule","Ment","BigMent","StartBtn","CancelBtn","red","BtnBox"],"mappings":"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","sourcesContent":["import React, { useEffect }  from 'react';\nimport styled, { Keyframes } from 'styled-components';\nimport { zoomIn, zoomOut } from '../../style/keyframes';\nimport Loader from 'react-loader-spinner';\nimport { theme } from '../../style/theme';\nimport { useChat } from '../../Hooks/useChat';\nimport { VisibilityType } from '../../type';\nimport { observer } from 'mobx-react';\nimport MessageBox from './MessageBox';\nimport userStore from '../../store/userStore';\n\nconst ChatWindow: React.FC = observer(() => {\n\n    const chat = useChat();\n\n    useEffect(() => {\n        chat.getMatchedUser();\n        chat.handleReceiveMsg();\n        chat.chatStopped(); // 상대방이 대화종료를 했을때\n    }, []); // eslint-disable-line\n\n    useEffect(() => { \n        return () => {\n            chat.stopChat();\n        }\n    }, []); // eslint-disable-line\n\n    useEffect(() => {\n        chat.handlePushChat();\n        return () => {\n            chat.setRecentChat({ nickName: '', message: '', socketID: '' });\n            chat.scrollToBottom();\n        };\n    }, [chat.recentChat.message]); // eslint-disable-line\n\n    return (\n        <Row>\n            <ChatBox animation={chat.isMatched ? zoomIn : zoomOut}\n                     visibility={chat.display}\n                     >\n                <Screen ref={chat.screen} >\n                    {chat.chatLog.map((data, index) => (\n                        <MessageBox message={data.message}\n                                    nickName={data.nickName}\n                                    socketID={data.socketID === userStore.socketID}\n                                    key={index}\n                                    />\n                    ))}\n                </Screen>\n                <SenderBox>\n                    <Input ref={chat.input}\n                           onKeyPress={chat.handleEnter}\n                           />\n                    <SendBtn ref={chat.sendBtn}\n                             onClick={chat.handleSendMsg}\n                             disabled={chat.chatFinished ? true : false}\n                             >\n                        전송\n                    </SendBtn>\n                </SenderBox>\n            </ChatBox>\n\n            <HandlerContainer>\n                {chat.isSearching ? \n                    <>\n                        {chat.isMatched ? \n                            <>\n                                {chat.chatFinished ? \n                                    <>\n                                        <BigMent> 대화가 종료되었어요 </BigMent>\n                                        <br />\n                                        <br />\n                                        <Ment size='18px' > 상대방은 어떤 사람이었을까요? </Ment>\n                                        <br />\n                                        <br />\n                                        <br />\n                                        <BtnBox>\n                                            <StartBtn onClick={chat.reStart} > 다시하기 </StartBtn>\n                                        </BtnBox>\n                                    </> :\n                                    <>\n                                        <BigMent> 상대와 연결되었어요 </BigMent>\n                                        <br />\n                                        <br />\n                                        <Ment size='18px'> 먼저 인사 해보시는 건 어떠세요? </Ment>\n                                        <br />\n                                        <br />\n                                        <br />\n                                        <BtnBox>\n                                            <CancelBtn onClick={chat.stopChat}> 대화방 나가기 </CancelBtn>\n                                        </BtnBox>\n                                    </>}\n                            </> : \n                            <>\n                                <BigMent style={{ marginBottom: '30px' }} > 상대를 찾고 있어요 </BigMent>\n                                <Loader type=\"Circles\" color={theme.colors.plum} height={60} width={60} />\n                                <BtnBox>\n                                    <CancelBtn onClick={chat.handleSearch} > 취소하기 </CancelBtn>\n                                </BtnBox>\n                            </>}\n                    </> :\n                    <>\n                        <BigMent> 상대를 찾고 대화를 시작하세요 ! </BigMent>\n                        <br />\n                        \n                        <Rule>\n                            <Ment size='18px'> · 대화는 서로가 설정한 이름으로 진행돼요 </Ment>\n                            <Ment size='18px'> · 중간에 대화를 나가지 않으면 대화를 계속 할 수 있어요 </Ment>\n                            <Ment size='18px'> · 누군가 대화방을 나가게 되면 대화가 종료돼요 </Ment>\n                        </Rule>\n                        <br />\n                        <BtnBox>\n                            <StartBtn onClick={chat.handleSearch} > 상대 찾기 </StartBtn>\n                        </BtnBox>\n                    </>}\n            </HandlerContainer>\n            \n        </Row>\n    );\n});\n\nexport default ChatWindow;\n\nconst Row = styled.div`\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    @media only screen and (max-width: 1450px) {\n        flex-direction: column;\n    }\n`;\n\nconst ChatBox = styled.div<{\n    animation: Keyframes,\n    visibility: VisibilityType,\n}>`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-right: 20px;\n    width: 100%;\n    height: 740px;\n    min-height: 740px;\n    visibility: ${({ visibility }) => visibility};\n    animation: ${({ animation }) => animation} .7s ease forwards;\n    @media only screen and (max-width: 1450px) {\n        margin-right: 0px;\n        min-height: 340px;\n    }\n`;\n\nconst Screen = styled.div`\n    width: 740px;\n    height: 680px;\n    max-height: 680px;\n    background-color: ${({ theme }) => theme.colors.white10};\n    border-radius: 10px;\n    overflow-y: auto;\n    @media only screen and (max-width: 1450px) {\n        width: 99%;\n        height: 70%;\n        min-width: 300px;\n    };\n`;\n\nconst SenderBox = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    width: 740px;\n    min-width: 500px;\n    height: 50px;\n    @media only screen and (max-width: 1450px) {\n        width: 99%;\n        min-width: 200px;\n    }\n`;\n\nconst Input = styled.input.attrs(({\n    type: 'text',\n    placeholder: '내용을 입력해주세요',\n    autocomplete: 'off',\n}))`\n    all: unset;\n    width: 84%;\n    min-height: 50px;\n    padding-left: 30px;\n    font-size: 18px;\n    color: ${({ theme }) => theme.colors.white};\n    background-color: ${({ theme }) => theme.colors.white10};\n    border-radius: 10px;\n    @media only screen and (max-width: 400px) {\n        width: 99%;\n    }\n`;\n\nconst SendBtn = styled.button`\n    all: unset;\n    width: 10%;\n    height: 50px;\n    font-size: 18px;\n    text-align: center;\n    background-color: ${({ theme }) => theme.colors.main60};\n    border-radius: 10px;\n    color: ${({ theme }) => theme.colors.white};\n    cursor: pointer;\n    transition: .3s ease;\n    &:hover {\n        background-color: ${({ theme }) => theme.colors.plum};\n        color: ${({ theme }) => theme.colors.black};\n    }\n    @media only screen and (max-width: 1450px) {\n        font-size: 15px;\n        width: 10%;\n    }\n`;\n\nconst HandlerContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    min-width: 300px;\n    height: 740px;\n    border-radius: 10px;\n    background-color: ${({ theme }) => theme.colors.main60};\n    @media only screen and (max-width: 1450px) {\n        height: 70%;\n    }\n`;\n\nconst Rule = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n`;\n\nconst Ment = styled.div<{\n    size?: string\n}>`\n    font-size: 17px;\n    margin-bottom: 10px;\n    white-space: nowrap;\n    color: ${({ theme }) => theme.colors.white};\n    @media only screen and (max-width: 1520px) {\n        font-size: 15px;\n    }\n`;\n\nconst BigMent = styled(Ment)`\n    font-size: 30px;\n    color: ${({ theme }) => theme.colors.white};\n    @media only screen and (max-width: 1520px) {\n        font-size: 25px;\n    }\n`;\n\nconst StartBtn = styled(SendBtn)`\n    width: 150px;\n    height: 70px;\n    font-size: 20px;\n    &:hover {\n        color: ${({ theme }) => theme.colors.black};\n    }\n    @media only screen and (max-width: 1450px) {\n        width: 100px;\n        height: 40px;\n        font-size: 17px;\n        margin-top: 15px;\n    }\n`;\n\nconst CancelBtn = styled(StartBtn)`\n    &:hover {\n        background-color: ${({ theme }) => theme.colors.red};\n        color: ${({ theme }) => theme.colors.white};\n    }\n`;\n\nconst BtnBox = styled.div`\n    position: absolute;\n    bottom: 70px;\n    height: 35%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    @media only screen and (max-width: 1450px) {\n        bottom: -60px;\n    }\n`;"]},"metadata":{},"sourceType":"module"}