{"ast":null,"code":"import { action, computed, makeObservable, observable } from \"mobx\";\nimport serendyRepository from '../repository/serendyRepository';\n\nclass AuthStore {\n  constructor() {\n    this._isSignIn = false;\n    this._user = null;\n    makeObservable(this, {\n      _isSignIn: observable,\n      _user: observable,\n      isSignIn: computed,\n      user: computed,\n      setIsSignIn: action.bound,\n      setUser: action,\n      signIn: action.bound,\n      signOut: action.bound\n    });\n  }\n\n  get isSignIn() {\n    return this._isSignIn;\n  }\n\n  get user() {\n    return this._user;\n  }\n\n  setIsSignIn() {\n    this._isSignIn = true;\n  }\n\n  setUser(user) {\n    this._user = user;\n  }\n\n  async signIn(userData, setError, push) {\n    try {\n      const response = await serendyRepository.signIn(userData);\n\n      if (response.data.message === 'Invalid Token') {\n        console.log('invalid token');\n      }\n\n      if (response.data.message === 'SignIn Fail') {\n        console.log('fail');\n        setError();\n      } else if (response.data.message === 'SignIn Success') {\n        console.log('success');\n        this.setUser(response.data.nickName);\n        this.setIsSignIn();\n        push();\n      }\n    } catch (err) {\n      alert('현재 서버가 점검중입니다');\n    }\n  }\n\n  signOut(push) {\n    this._isSignIn = false;\n    this._user = null;\n    push();\n  }\n\n}\n\nconst authStore = new AuthStore();\nexport default authStore;","map":{"version":3,"sources":["/Users/hyeonghan/VSCode/React/Serendy/client/src/store/authStore.ts"],"names":["action","computed","makeObservable","observable","serendyRepository","AuthStore","constructor","_isSignIn","_user","isSignIn","user","setIsSignIn","bound","setUser","signIn","signOut","userData","setError","push","response","data","message","console","log","nickName","err","alert","authStore"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,QAAjB,EAA2BC,cAA3B,EAA2CC,UAA3C,QAA6D,MAA7D;AAEA,OAAOC,iBAAP,MAA8B,iCAA9B;;AAWA,MAAMC,SAAN,CAAsC;AAKlCC,EAAAA,WAAW,GAAG;AAAA,SAHNC,SAGM,GAHe,KAGf;AAAA,SAFNC,KAEM,GAFgB,IAEhB;AACVN,IAAAA,cAAc,CAAmC,IAAnC,EAAyC;AACnDK,MAAAA,SAAS,EAAEJ,UADwC;AAEnDK,MAAAA,KAAK,EAAEL,UAF4C;AAGnDM,MAAAA,QAAQ,EAAER,QAHyC;AAInDS,MAAAA,IAAI,EAAET,QAJ6C;AAKnDU,MAAAA,WAAW,EAAEX,MAAM,CAACY,KAL+B;AAMnDC,MAAAA,OAAO,EAAEb,MAN0C;AAOnDc,MAAAA,MAAM,EAAEd,MAAM,CAACY,KAPoC;AAQnDG,MAAAA,OAAO,EAAEf,MAAM,CAACY;AARmC,KAAzC,CAAd;AAUH;;AAEW,MAARH,QAAQ,GAAY;AACpB,WAAO,KAAKF,SAAZ;AACH;;AAEO,MAAJG,IAAI,GAAiB;AACrB,WAAO,KAAKF,KAAZ;AACH;;AAEDG,EAAAA,WAAW,GAAS;AAChB,SAAKJ,SAAL,GAAiB,IAAjB;AACH;;AAEDM,EAAAA,OAAO,CAACH,IAAD,EAAoB;AACvB,SAAKF,KAAL,GAAaE,IAAb;AACH;;AAEW,QAANI,MAAM,CAACE,QAAD,EAAwBC,QAAxB,EAA8CC,IAA9C,EAA+E;AACvF,QAAI;AACA,YAAMC,QAAQ,GAAG,MAAMf,iBAAiB,CAACU,MAAlB,CAAyBE,QAAzB,CAAvB;;AACA,UAAKG,QAAQ,CAACC,IAAT,CAAcC,OAAd,KAA0B,eAA/B,EAAiD;AAC7CC,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;;AACD,UAAKJ,QAAQ,CAACC,IAAT,CAAcC,OAAd,KAA0B,aAA/B,EAA+C;AAC3CC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAN,QAAAA,QAAQ;AACX,OAHD,MAGO,IAAKE,QAAQ,CAACC,IAAT,CAAcC,OAAd,KAA0B,gBAA/B,EAAkD;AACrDC,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,aAAKV,OAAL,CAAaM,QAAQ,CAACC,IAAT,CAAcI,QAA3B;AACA,aAAKb,WAAL;AACAO,QAAAA,IAAI;AACP;AACJ,KAdD,CAcE,OAAMO,GAAN,EAAW;AACTC,MAAAA,KAAK,CAAC,eAAD,CAAL;AACH;AACJ;;AAEDX,EAAAA,OAAO,CAACG,IAAD,EAAyB;AAC5B,SAAKX,SAAL,GAAiB,KAAjB;AACA,SAAKC,KAAL,GAAa,IAAb;AACAU,IAAAA,IAAI;AACP;;AA1DiC;;AA6DtC,MAAMS,SAAS,GAAG,IAAItB,SAAJ,EAAlB;AACA,eAAesB,SAAf","sourcesContent":["import { action, computed, makeObservable, observable } from \"mobx\";\nimport { ISignInData } from '../components/SignIn/SignInBox';\nimport serendyRepository from '../repository/serendyRepository';\n\ninterface IUser {\n    nickName: string;\n}\n\ninterface IAuthStore {\n    isSignIn: boolean;\n    user: IUser | null;\n}\n\nclass AuthStore implements IAuthStore {\n\n    private _isSignIn: boolean = false;\n    private _user: IUser | null = null;\n\n    constructor() {\n        makeObservable<AuthStore, '_isSignIn' | '_user'>(this, {\n            _isSignIn: observable,\n            _user: observable,\n            isSignIn: computed,\n            user: computed,\n            setIsSignIn: action.bound,\n            setUser: action,\n            signIn: action.bound,\n            signOut: action.bound,\n        })\n    }\n\n    get isSignIn(): boolean {\n        return this._isSignIn;\n    }\n\n    get user(): IUser | null {\n        return this._user;\n    }\n\n    setIsSignIn(): void {\n        this._isSignIn = true;\n    }\n\n    setUser(user: IUser): void {\n        this._user = user;\n    }\n\n    async signIn(userData: ISignInData, setError: () => void, push: () => void): Promise<void> {\n        try {\n            const response = await serendyRepository.signIn(userData);\n            if ((response.data.message === 'Invalid Token')) {\n                console.log('invalid token');\n            }\n            if ((response.data.message === 'SignIn Fail')) {\n                console.log('fail');\n                setError();\n            } else if ((response.data.message === 'SignIn Success')) {\n                console.log('success');\n                this.setUser(response.data.nickName);\n                this.setIsSignIn();\n                push();\n            }\n        } catch(err) {\n            alert('현재 서버가 점검중입니다');\n        }\n    }\n\n    signOut(push: () => void): void {\n        this._isSignIn = false;\n        this._user = null;\n        push();\n    }\n}\n\nconst authStore = new AuthStore();\nexport default authStore;"]},"metadata":{},"sourceType":"module"}