{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/hyeonghan/VSCode/React/Serendy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useEffect}from'react';import styled from'styled-components';import CenterView from'../components/PublicComponents/CenterView';import Container from'../components/PublicComponents/Container';import MatchHandler from'../components/ChatPage/MatchHandler';import ChatWindow from'../components/ChatPage/ChatWindow';import chatStore from'../store/chatStore';import{observer}from'mobx-react';import userStore from'../store/userStore';import{io}from'socket.io-client';import{BASE_URL}from'../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatPage=observer(function(){useEffect(function(){if(userStore.user){userStore.setUserSocket(io(BASE_URL));userStore.saveSocketID();};return function(){var _userStore$userSocket;(_userStore$userSocket=userStore.userSocket)===null||_userStore$userSocket===void 0?void 0:_userStore$userSocket.disconnect();userStore.setSocketID(null);};},[userStore.user]);//eslint-disable-line\nuseEffect(function(){chatStore.handleMatched();chatStore.handleReceiveMsg();chatStore.chatStopped();},[]);// eslint-disable-line\nuseEffect(function(){return function(){chatStore.stopChat();chatStore.reset();};},[]);// eslint-disable-line\nreturn/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(CenterView,{children:/*#__PURE__*/_jsxs(ChatBox,{children:[/*#__PURE__*/_jsx(ChatWindow,{}),/*#__PURE__*/_jsx(HandlerBox,{children:/*#__PURE__*/_jsx(MatchHandler,{isSearching:chatStore.isSearching,isMatched:chatStore.isMatched,isFinished:chatStore.isFinished})})]})})});});export default ChatPage;var ChatBox=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: center;\\n    align-items: center;\\n    width: 100%;\\n    height: 100%;\\n    @media only screen and (max-width: 1450px) {\\n        flex-direction: column;\\n    };\\n    @media only screen and (max-width: 600px) {\\n        flex-direction: column-reverse;\\n    };\\n\"])));var HandlerBox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    position: relative;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    width: 100%;\\n    min-width: 300px;\\n    height: 740px;\\n    border-radius: 10px;\\n    background-color: \",\";\\n    @media only screen and (max-width: 1450px) {\\n        height: 70%;\\n    };\\n\"])),function(_ref){var theme=_ref.theme;return theme.colors.main60;});","map":{"version":3,"sources":["/Users/hyeonghan/VSCode/React/Serendy/client/src/pages/ChatPage.tsx"],"names":["React","useEffect","styled","CenterView","Container","MatchHandler","ChatWindow","chatStore","observer","userStore","io","BASE_URL","ChatPage","user","setUserSocket","saveSocketID","userSocket","disconnect","setSocketID","handleMatched","handleReceiveMsg","chatStopped","stopChat","reset","isSearching","isMatched","isFinished","ChatBox","div","HandlerBox","theme","colors","main60"],"mappings":"wNAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2CAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0CAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,qCAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mCAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,OAASC,EAAT,KAAmB,kBAAnB,CACA,OAASC,QAAT,KAAyB,WAAzB,C,wFAEA,GAAMC,CAAAA,QAAkB,CAAGJ,QAAQ,CAAC,UAAM,CAEtCP,SAAS,CAAC,UAAM,CACZ,GAAIQ,SAAS,CAACI,IAAd,CAAoB,CAChBJ,SAAS,CAACK,aAAV,CAAwBJ,EAAE,CAACC,QAAD,CAA1B,EACAF,SAAS,CAACM,YAAV,GACH,EACD,MAAO,WAAM,2BACT,uBAAAN,SAAS,CAACO,UAAV,sEAAsBC,UAAtB,GACAR,SAAS,CAACS,WAAV,CAAsB,IAAtB,EACH,CAHD,CAIH,CATQ,CASN,CAACT,SAAS,CAACI,IAAX,CATM,CAAT,CASsB;AAEtBZ,SAAS,CAAC,UAAM,CACZM,SAAS,CAACY,aAAV,GACAZ,SAAS,CAACa,gBAAV,GACAb,SAAS,CAACc,WAAV,GACH,CAJQ,CAIN,EAJM,CAAT,CAIQ;AAERpB,SAAS,CAAC,UAAM,CACZ,MAAO,WAAM,CACTM,SAAS,CAACe,QAAV,GACAf,SAAS,CAACgB,KAAV,GACH,CAHD,CAIH,CALQ,CAKN,EALM,CAAT,CAKQ;AAER,mBACI,KAAC,SAAD,wBACI,KAAC,UAAD,wBACI,MAAC,OAAD,yBACI,KAAC,UAAD,IADJ,cAEI,KAAC,UAAD,wBACI,KAAC,YAAD,EAAc,WAAW,CAAEhB,SAAS,CAACiB,WAArC,CACI,SAAS,CAAEjB,SAAS,CAACkB,SADzB,CAEI,UAAU,CAAElB,SAAS,CAACmB,UAF1B,EADJ,EAFJ,GADJ,EADJ,EADJ,CAeH,CAzCkC,CAAnC,CA2CA,cAAed,CAAAA,QAAf,CAEA,GAAMe,CAAAA,OAAO,CAAGzB,MAAM,CAAC0B,GAAV,2YAAb,CAeA,GAAMC,CAAAA,UAAU,CAAG3B,MAAM,CAAC0B,GAAV,0YAUQ,kBAAGE,CAAAA,KAAH,MAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACC,MAAN,CAAaC,MAA5B,EAVR,CAAhB","sourcesContent":["import React, { useEffect } from 'react'\nimport styled from 'styled-components';\nimport CenterView from '../components/PublicComponents/CenterView'\nimport Container from '../components/PublicComponents/Container'\nimport MatchHandler from '../components/ChatPage/MatchHandler';\nimport ChatWindow from '../components/ChatPage/ChatWindow';\nimport chatStore from '../store/chatStore';\nimport { observer } from 'mobx-react';\nimport userStore from '../store/userStore';\nimport { io } from 'socket.io-client';\nimport { BASE_URL } from '../config';\n\nconst ChatPage: React.FC = observer(() => {\n\n    useEffect(() => {\n        if (userStore.user) {\n            userStore.setUserSocket(io(BASE_URL));\n            userStore.saveSocketID();\n        }; \n        return () => {\n            userStore.userSocket?.disconnect();\n            userStore.setSocketID(null);\n        };\n    }, [userStore.user]); //eslint-disable-line\n\n    useEffect(() => {\n        chatStore.handleMatched();\n        chatStore.handleReceiveMsg();\n        chatStore.chatStopped();\n    }, []); // eslint-disable-line\n\n    useEffect(() => {\n        return () => {\n            chatStore.stopChat();\n            chatStore.reset();\n        };\n    }, []); // eslint-disable-line\n\n    return (\n        <Container>\n            <CenterView>\n                <ChatBox>\n                    <ChatWindow />\n                    <HandlerBox>\n                        <MatchHandler isSearching={chatStore.isSearching} \n                            isMatched={chatStore.isMatched}\n                            isFinished={chatStore.isFinished}\n                        />\n                    </HandlerBox>\n                </ChatBox>\n            </CenterView>\n        </Container>\n    );\n});\n\nexport default ChatPage;\n\nconst ChatBox = styled.div`\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    @media only screen and (max-width: 1450px) {\n        flex-direction: column;\n    };\n    @media only screen and (max-width: 600px) {\n        flex-direction: column-reverse;\n    };\n`;\n\nconst HandlerBox = styled.div`\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    min-width: 300px;\n    height: 740px;\n    border-radius: 10px;\n    background-color: ${({ theme }) => theme.colors.main60};\n    @media only screen and (max-width: 1450px) {\n        height: 70%;\n    };\n`;\n"]},"metadata":{},"sourceType":"module"}